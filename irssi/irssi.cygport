# irssi.cygport - directions for packaging irssi
inherit perl

NAME="irssi"
VERSION="0.8.18"
RELEASE=1
CATEGORY="Net"
SUMMARY="Modular text mode IRC client with Perl scripting"
DESCRIPTION="Irssi is a modular IRC client with Perl scripting. Only text-mode
frontend is currently supported. The GTK/GNOME frontend is no
longer being maintained."
HOMEPAGE="http://irssi.org/"
SRC_URI="http://irssi.org/files/irssi-${PV}.tar.xz"

PKG_NAMES="irssi irssi-devel"

irssi_CONTENTS="etc/ usr/bin/ usr/lib/ usr/share"

irssi_devel_CONTENTS="usr/include/"
irssi_devel_SUMMARY="Irssi - headers"

CFLAGS="-DUSEIMPORTLIB"
CYGCONF_ARGS="--with-perl-staticlib"
DIFF_EXCLUDES="irssi-config.h"

src_compile() {
        cd ${S}
        cygautoreconf
        cd ${B}
        cygconf
        cygmake CFLAGS="-g ${CFLAGS}"
}

src_install() {
	cd ${B}
	cyginstall
	make_etc_defaults /etc/irssi.conf
}
