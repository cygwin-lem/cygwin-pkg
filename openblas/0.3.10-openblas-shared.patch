--- origsrc/OpenBLAS-0.3.10/Makefile	2020-06-14 22:03:04.000000000 +0200
+++ Makefile	2020-06-28 22:03:34.218179700 +0200
@@ -39,7 +39,7 @@ SUBDIRS_ALL = $(SUBDIRS) test ctest utes
 .PHONY : all libs netlib $(RELA) test ctest shared install
 .NOTPARALLEL : all libs $(RELA) prof lapack-test install blas-test
 
-all :: libs netlib $(RELA) tests shared
+all :: libs netlib $(RELA) shared
 	@echo
 	@echo " OpenBLAS build complete. ($(LIB_COMPONENTS))"
 	@echo
@@ -131,6 +131,10 @@ ifeq ($(OSNAME), WINNT)
 endif
 ifeq ($(OSNAME), CYGWIN_NT)
 	@$(MAKE) -C exports dll
+	gcc $(CFLAGS) -shared -Wl,--enable-auto-import -Wl,--enable-auto-image-base \
+	    -o cygblas-0.dll -Wl,--out-implib=libblas.dll.a \
+	    -Wl,--whole-archive exports/dllinit.o  cygopenblas.a \
+	    -Wl,--no-whole-archive -shared-libgcc -lgfortran
 endif
 endif
 
--- origsrc/OpenBLAS-0.3.10/ctest/Makefile	2020-06-14 22:03:04.000000000 +0200
+++ ctest/Makefile	2020-06-28 22:03:34.218179700 +0200
@@ -9,7 +9,7 @@ override CFLAGS += -DADD$(BU) -DCBLAS
 override TARGET_ARCH=
 override TARGET_MACH=
 
-LIB = $(TOPDIR)/$(LIBNAME)
+LIB = $(TOPDIR)/libblas.dll.a
 
 stestl1o = c_sblas1.o
 
--- origsrc/OpenBLAS-0.3.10/test/Makefile	2020-06-14 22:03:04.000000000 +0200
+++ test/Makefile	2020-06-28 22:07:30.214388000 +0200
@@ -152,54 +152,54 @@ endif
 endif
 
 sblat1 : sblat1.$(SUFFIX) ../$(LIBNAME)
-	$(FC) $(FLDFLAGS) -o sblat1 sblat1.$(SUFFIX) ../$(LIBNAME) $(EXTRALIB) $(CEXTRALIB)
+	$(FC) $(FLDFLAGS) -o sblat1 sblat1.$(SUFFIX) ../libblas.dll.a $(EXTRALIB) $(CEXTRALIB)
 
 dblat1 : dblat1.$(SUFFIX) ../$(LIBNAME)
-	$(FC) $(FLDFLAGS) -o dblat1 dblat1.$(SUFFIX) ../$(LIBNAME) $(EXTRALIB) $(CEXTRALIB)
+	$(FC) $(FLDFLAGS) -o dblat1 dblat1.$(SUFFIX) ../libblas.dll.a $(EXTRALIB) $(CEXTRALIB)
 
 qblat1 : qblat1.$(SUFFIX) ../$(LIBNAME)
-	$(FC) $(FLDFLAGS) -o qblat1 qblat1.$(SUFFIX) ../$(LIBNAME) $(EXTRALIB) $(CEXTRALIB)
+	$(FC) $(FLDFLAGS) -o qblat1 qblat1.$(SUFFIX) ../libblas.dll.a $(EXTRALIB) $(CEXTRALIB)
 
 cblat1 : cblat1.$(SUFFIX) ../$(LIBNAME)
-	$(FC) $(FLDFLAGS) -o cblat1 cblat1.$(SUFFIX) ../$(LIBNAME) $(EXTRALIB) $(CEXTRALIB)
+	$(FC) $(FLDFLAGS) -o cblat1 cblat1.$(SUFFIX) ../libblas.dll.a $(EXTRALIB) $(CEXTRALIB)
 
 zblat1 : zblat1.$(SUFFIX) ../$(LIBNAME)
-	$(FC) $(FLDFLAGS) -o zblat1 zblat1.$(SUFFIX) ../$(LIBNAME) $(EXTRALIB) $(CEXTRALIB)
+	$(FC) $(FLDFLAGS) -o zblat1 zblat1.$(SUFFIX) ../libblas.dll.a $(EXTRALIB) $(CEXTRALIB)
 
 sblat2 : sblat2.$(SUFFIX) ../$(LIBNAME)
-	$(FC) $(FLDFLAGS) -o sblat2 sblat2.$(SUFFIX) ../$(LIBNAME) $(EXTRALIB) $(CEXTRALIB)
+	$(FC) $(FLDFLAGS) -o sblat2 sblat2.$(SUFFIX) ../libblas.dll.a $(EXTRALIB) $(CEXTRALIB)
 
 dblat2 : dblat2.$(SUFFIX) ../$(LIBNAME)
-	$(FC) $(FLDFLAGS) -o dblat2 dblat2.$(SUFFIX) ../$(LIBNAME) $(EXTRALIB) $(CEXTRALIB)
+	$(FC) $(FLDFLAGS) -o dblat2 dblat2.$(SUFFIX) ../libblas.dll.a $(EXTRALIB) $(CEXTRALIB)
 
 cblat2 : cblat2.$(SUFFIX) ../$(LIBNAME)
-	$(FC) $(FLDFLAGS) -o cblat2 cblat2.$(SUFFIX) ../$(LIBNAME) $(EXTRALIB) $(CEXTRALIB)
+	$(FC) $(FLDFLAGS) -o cblat2 cblat2.$(SUFFIX) ../libblas.dll.a $(EXTRALIB) $(CEXTRALIB)
 
 zblat2 : zblat2.$(SUFFIX) ../$(LIBNAME)
-	$(FC) $(FLDFLAGS) -o zblat2 zblat2.$(SUFFIX) ../$(LIBNAME) $(EXTRALIB) $(CEXTRALIB)
+	$(FC) $(FLDFLAGS) -o zblat2 zblat2.$(SUFFIX) ../libblas.dll.a $(EXTRALIB) $(CEXTRALIB)
 
 sblat3 : sblat3.$(SUFFIX) ../$(LIBNAME)
-	$(FC) $(FLDFLAGS) -o sblat3 sblat3.$(SUFFIX) ../$(LIBNAME) $(EXTRALIB) $(CEXTRALIB)
+	$(FC) $(FLDFLAGS) -o sblat3 sblat3.$(SUFFIX) ../libblas.dll.a $(EXTRALIB) $(CEXTRALIB)
 
 ifeq ($(BUILD_HALF),1)
 test_shgemm : compare_sgemm_shgemm.c ../$(LIBNAME)
-	$(FC) $(FLDFLAGS) -o test_shgemm compare_sgemm_shgemm.c ../$(LIBNAME) $(EXTRALIB) $(CEXTRALIB)
+	$(FC) $(FLDFLAGS) -o test_shgemm compare_sgemm_shgemm.c ../libblas.dll.a $(EXTRALIB) $(CEXTRALIB)
 endif
 
 dblat3 : dblat3.$(SUFFIX) ../$(LIBNAME)
-	$(FC) $(FLDFLAGS) -o dblat3 dblat3.$(SUFFIX) ../$(LIBNAME) $(EXTRALIB) $(CEXTRALIB)
+	$(FC) $(FLDFLAGS) -o dblat3 dblat3.$(SUFFIX) ../libblas.dll.a $(EXTRALIB) $(CEXTRALIB)
 
 cblat3 : cblat3.$(SUFFIX) ../$(LIBNAME)
-	$(FC) $(FLDFLAGS) -o cblat3 cblat3.$(SUFFIX) ../$(LIBNAME) $(EXTRALIB) $(CEXTRALIB)
+	$(FC) $(FLDFLAGS) -o cblat3 cblat3.$(SUFFIX) ../libblas.dll.a $(EXTRALIB) $(CEXTRALIB)
 
 zblat3 : zblat3.$(SUFFIX) ../$(LIBNAME)
-	$(FC) $(FLDFLAGS) -o zblat3 zblat3.$(SUFFIX) ../$(LIBNAME) $(EXTRALIB) $(CEXTRALIB)
+	$(FC) $(FLDFLAGS) -o zblat3 zblat3.$(SUFFIX) ../libblas.dll.a $(EXTRALIB) $(CEXTRALIB)
 
 cblat3_3m : cblat3_3m.$(SUFFIX) ../$(LIBNAME)
-	$(FC) $(FLDFLAGS) -o cblat3_3m cblat3_3m.$(SUFFIX) ../$(LIBNAME) $(EXTRALIB) $(CEXTRALIB)
+	$(FC) $(FLDFLAGS) -o cblat3_3m cblat3_3m.$(SUFFIX) ../libblas.dll.a $(EXTRALIB) $(CEXTRALIB)
 
 zblat3_3m : zblat3_3m.$(SUFFIX) ../$(LIBNAME)
-	$(FC) $(FLDFLAGS) -o zblat3_3m zblat3_3m.$(SUFFIX) ../$(LIBNAME) $(EXTRALIB) $(CEXTRALIB)
+	$(FC) $(FLDFLAGS) -o zblat3_3m zblat3_3m.$(SUFFIX) ../libblas.dll.a $(EXTRALIB) $(CEXTRALIB)
 
 
 
--- origsrc/OpenBLAS-0.3.10/utest/Makefile	2020-06-14 22:03:04.000000000 +0200
+++ utest/Makefile	2020-06-28 22:03:34.233805600 +0200
@@ -38,7 +38,7 @@ endif
 all : run_test
 
 $(UTESTBIN): $(OBJS)
-	$(CC) $(CFLAGS) $(LDFLAGS) -o $@ $^ ../$(LIBNAME) $(EXTRALIB) $(FEXTRALIB)
+	$(CC) $(CFLAGS) $(LDFLAGS) -o $@ $^ ../libblas.dll.a $(EXTRALIB) $(FEXTRALIB)
 
 run_test: $(UTESTBIN)
 ifndef CROSS
